{% extends "layout.html" %}
{% load static %}

{% block title %}

Cart
{% endblock %}
{% block body %}





  
    <!-- Heading -->
    <div class="bg-dark">
      <div class="container py-4">
        <!-- Breadcrumb -->
        <nav class="d-flex">
          <h6 class="mb-0">
            <a href="" class="text-white-50">Home</a>
            <span class="text-white-50 mx-2"> > </span>
            <a href="" class="text-white"><u>Shopping cart</u></a>
          </h6>
        </nav>
        <!-- Breadcrumb -->
      </div>
    </div>
    <!-- Heading -->
  </header>
    <!-- Shopping Cart Section Begin -->
    <section class="shopping-cart spad">
      <div class="container">
        <div class="row">
          <div class="col-lg-8">
            <div class="shopping__cart__table">
              <table>
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  {% for item in cart %}
  
                  <tr id="x{{ item.product.id }}" style="position: relative;">
                    <td class="product__cart__item">
                      <a href="{{ item.product.get_absolute_url }}">
                      <div class="product__cart__item__pic">
                        <img src="{{ item.product.image }}" width="50px" alt="">
                      </div>
                      <div class="product__cart__item__text">
                        <h6>{{ item.product.product_name }}</h6>
                        <h5>EGP {{ item.product.price }}</h5>
                      </div></a>
                    </td>
                    <td class="quantity__item">
                      <div class="">
                        <select value="{{ item.quantity }}" class="quantity-select" data-product-id="{{ item.product.id }}" style="width: 100px;" class="form-select me-4">
                            {% for option in existing_options|dictsort:"value" %}
                            <option value="{{ option.value }}" {% if option.value == item.quantity %}selected{% endif %}>{{ option.label }}</option>
                        {% endfor %}
                        </select>
                      </div>
                    </td>
                    <td class="cart__price"><text id="total_price_{{ item.product.id }}" class="h6">EGP {{ item.total }}</text> <br />
                    </td>
                    <td>
                      <div class="col-lg col-sm-6 d-flex justify-content-sm-center justify-content-md-start justify-content-lg-center justify-content-xl-end mb-2">
                        <div class="float-md-end">
                          <a href="#!" class="btn btn-light border px-2 icon-hover-primary"><i class="fas fa-heart fa-lg px-1 text-secondary"></i></a>
                          <a onclick="removeFromCart('{{ item.product.id }}')" class="btn btn-light border text-danger icon-hover-danger"> Remove</a>
                        </div>
                      </div>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            <div class="border-top pt-4 mx-4 mb-4">
              <p><i class="fas fa-truck text-muted fa-lg"></i> Free Delivery for orders over EGP 1000</p>
              <p class="text-muted">
  
              </p>
            </div>
            <div class="row">
              <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="continue__btn">
                  <a class="btn btn-light w-100 border mt-2" id="back-button">Continue Shopping</a>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="cart__discount">
  
  
              <h6>Discount codes</h6>
              <div id="main_coupon_div" class="form-group">
                <label class="form-label">Have coupon?</label>
    
                  {% if user.is_authenticated %}
                  <div class="input-group">
                    <input id="promo_code" type="text" class="form-control border" name="promo_code" placeholder="Coupon code" />
                    <button id="apply-promo-code" onclick="Apply_promo_function()" class="btn btn-light border">Apply</button>
                  </div>
                    <div id="coupon-div">
                      {% if promocode %}
                          <p>Coupon applied: {{ promocode }}<button id="remove-coupon-btn" title="remove code">x</button></p>
                          
                      {% endif %}
                    </div>
                    {% else %}
                    <h5><a href="{% url 'login' %}">Login</a> or <a href="{% url 'register' %}">Create An Account</a> To Use Coupons</h5>
                    <hr />
                    <p>Don't Worry We Will Keep Your Cart Items And Designs :) </p>
                    {% endif %}
                </div>
  
            </div>
            <div class="cart__total">
              <h6>Cart total</h6>
              <ul>
                
                <li>Subtotal <span id="cart_total">EGP {{ user_cart.total_price_before_discount }}</span></li>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Discount:</p>
                  {% if promocode %}
                  
                  <p id="discount" class="mb-2 text-success">EGP {{ discount }}</p>
                  {% else %}
                  <p id="discount" class="mb-2 text-success">EGP 0.00</p>
  
                  {% endif %}
                </div>
                <div class="d-flex justify-content-between">
                  <p class="mb-2">Total price:</p>
                  {% if promocode %}
                    <p id="cart_total_discount" class="mb-2 fw-bold">EGP {{user_cart.total_price}}</p>
                  {% else %}
                    <p id="cart_total_discount" class="mb-2">EGP {{user_cart.total_price_before_discount}}</p>
                  {% endif %}
                </div>
              </ul>
              <a href="{% url 'checkout' %}" class="primary-btn">Proceed to checkout</a>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Shopping Cart Section End -->

  <section>
    <div class="container my-5">
      <header class="mb-4">
        <h3>Recommended items</h3>
      </header>
  
      <div class="row">
        <div class="col-lg-3 col-md-6 col-sm-6">
          <div class="card px-4 border shadow-0 mb-4 mb-lg-0">
            <div class="mask px-2" style="height: 50px;">
              <div class="d-flex justify-content-between">
                <h6><span class="badge bg-danger pt-1 mt-3 ms-2">New</span></h6>
                <a href="#"><i class="fas fa-heart text-primary fa-lg float-end pt-3 m-2"></i></a>
              </div>
            </div>
            <a href="#" class="">
              <img src="https://bootstrap-ecommerce.com/bootstrap5-ecommerce/images/items/7.webp" class="card-img-top rounded-2" />
            </a>
            <div class="card-body d-flex flex-column pt-3 border-top">
              <a href="#" class="nav-link">Gaming Headset with Mic</a>
              <div class="price-wrap mb-2">
                <strong class="">$18.95</strong>
                <del class="">$24.99</del>
              </div>
              <div class="card-footer d-flex align-items-end pt-3 px-0 pb-0 mt-auto">
                <a href="#" class="btn btn-outline-primary w-100">Add to cart</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
          <div class="card px-4 border shadow-0 mb-4 mb-lg-0">
            <div class="mask px-2" style="height: 50px;">
              <a href="#"><i class="fas fa-heart text-primary fa-lg float-end pt-3 m-2"></i></a>
            </div>
            <a href="#" class="">
              <img src="https://bootstrap-ecommerce.com/bootstrap5-ecommerce/images/items/5.webp" class="card-img-top rounded-2" />
            </a>
            <div class="card-body d-flex flex-column pt-3 border-top">
              <a href="#" class="nav-link">Apple Watch Series 1 Sport </a>
              <div class="price-wrap mb-2">
                <strong class="">$120.00</strong>
              </div>
              <div class="card-footer d-flex align-items-end pt-3 px-0 pb-0 mt-auto">
                <a href="#" class="btn btn-outline-primary w-100">Add to cart</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
          <div class="card px-4 border shadow-0">
            <div class="mask px-2" style="height: 50px;">
              <a href="#"><i class="fas fa-heart text-primary fa-lg float-end pt-3 m-2"></i></a>
            </div>
            <a href="#" class="">
              <img src="https://bootstrap-ecommerce.com/bootstrap5-ecommerce/images/items/9.webp" class="card-img-top rounded-2" />
            </a>
            <div class="card-body d-flex flex-column pt-3 border-top">
              <a href="#" class="nav-link">Men's Denim Jeans Shorts</a>
              <div class="price-wrap mb-2">
                <strong class="">$80.50</strong>
              </div>
              <div class="card-footer d-flex align-items-end pt-3 px-0 pb-0 mt-auto">
                <a href="#" class="btn btn-outline-primary w-100">Add to cart</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
          <div class="card px-4 border shadow-0">
            <div class="mask px-2" style="height: 50px;">
              <a href="#"><i class="fas fa-heart text-primary fa-lg float-end pt-3 m-2"></i></a>
            </div>
            <a href="#" class="">
              <img src="https://bootstrap-ecommerce.com/bootstrap5-ecommerce/images/items/10.webp" class="card-img-top rounded-2" />
            </a>
            <div class="card-body d-flex flex-column pt-3 border-top">
              <a href="#" class="nav-link">Mens T-shirt Cotton Base Layer Slim fit </a>
              <div class="price-wrap mb-2">
                <strong class="">$13.90</strong>
              </div>
              <div class="card-footer d-flex align-items-end pt-3 px-0 pb-0 mt-auto">
                <a href="#" class="btn btn-outline-primary w-100">Add to cart</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Recommended -->
  
 
















    <style>
      .fade-in {
    animation: fadeIn 1s;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
      #remove-coupon-btn {
    background-color: transparent;
    border: none;
    cursor: pointer;
}
.fade-away {
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

.hidden {
  height: 0;
  transition: height 4s ease-in-out;
}
    </style>


{% endblock %}
